# git êµ¬ì¡°
<img src="https://github.com/user-attachments/assets/a5eab18a-130a-4b1e-b4d2-f8bcef3583bd" width="2000rem" height="1000rem">
í˜¼ì ì‘ì—…ì„ ì§„í–‰í•˜ì˜€ê¸° ë•Œë¬¸ì— mainë¸Œëœì¹˜ì— ë°”ë¡œ ì»¤ë°‹ì„ í•˜ë©° ì‘ì—…í•˜ê±°ë‚˜, Trunk-based ì „ëµì„ ì´ìš©í•˜ì—¬ gitì„ ì§„í–‰í•˜ì—¬ë„ ê´œì°®ì§€ë§Œ, í˜‘ì—…ì‹œë¼ê³  ê°€ì •í•˜ì—¬ </br>
ëª¨ë“ˆë³„ë¡œ ë¸Œëœì¹˜ë¥¼ ë”°ë¡œ ìƒì„±í•˜ì—¬ í•©ì¹˜ëŠ” ê¹ƒ ì „ëµì„ ì„¸ì›Œ ë³´ì•˜ìŠµë‹ˆë‹¤.</br> </br>

#### git êµ¬ì¡° ì„¤ëª…

ë¨¼ì € main ë¸Œëœì¹˜ì—ì„œ Admin ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì˜€ê³  Admin ë¸Œëœì¹˜ì—ì„œ AdminPraticeë¼ëŠ” ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ í›„ AdminPraticeì—ì„œ Adminì— ëŒ€í•œ ì „ë°˜ì ì¸ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•˜ê³  crudêµ¬í˜„ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì»¤ë°‹í•˜ì˜€ìŠµë‹ˆë‹¤.

ê·¸ í›„ì— Admin ë¸Œëœì¹˜ë¡œ AdminPratice ë¸Œëœì¹˜ì˜ ë‚´ìš©ì„ mergeí•˜ì˜€ê³  AdminPraticeë¸Œëœì¹˜ëŠ” ì‚­ì œí•˜ì˜€ìŠµë‹ˆë‹¤. Admin ë¸Œëœì¹˜ì—ì„œ Auth ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ê³  Auth ë¸Œëœì¹˜ì—ì„œ pratice ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì—¬ pratice ë¸Œëœì¹˜ì—ì„œ 
ì‘ì—…í•˜ì˜€ìŠµë‹ˆë‹¤.

pratice ë¸Œëœì¹˜ì—ì„œ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì™„ì„±í•˜ê³  skill compliteë¼ëŠ” ë©”ì„¸ì§€ë¡œ ì»¤ë°‹í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ í›„ mainì—ì„œ ë§Œë“  test ë¸Œëœì¹˜ì— mainê³¼ í˜„ì¬ê¹Œì§€ í•œ ì‘ì—…(pratice ë¸Œëœì¹˜)ë¥¼ mergeí•˜ì—¬ testë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œ í›„ test ë¸Œëœì¹˜ì—ì„œ buildtest ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì—¬ buildtest ë¸Œëœì¹˜ì—ì„œ ë¹Œë“œë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€ë¡œ ì§„í–‰í•˜ê³  ë°°í¬ í™˜ê²½ì— ë§ê²Œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ìˆ˜ì •í•œ ë‚´ìš©ì„ buildì„±ê³µì´ë¼ëŠ” ë©”ì„¸ì§€ë¡œ ì»¤ë°‹í•˜ì˜€ìŠµë‹ˆë‹¤.
main ë¸Œëœì¹˜ì—ì„œ buildtestì˜ ë‚´ìš©ì„ mergeí•˜ê³  vercelì„ ì´ìš©í•˜ì—¬ main ë¸Œëœì¹˜ì˜ ì½”ë“œë¥¼ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤ ê·¸ í›„ hotfix ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì—¬ ìˆ˜ì •ì ì´ ìˆì„ë•Œë§ˆë‹¤ hotfixë¸Œëœì¹˜ì—ì„œ ì‘ì—…í•œ ë’¤ mainì—ì„œ pullí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê¹ƒì„ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.




# í•´ê²°ê³¼ì œ

ë¬¸ì œ ìƒí™© : ë‹¹ì‹ ì€ ì„œì ì„ ì˜¨ë¼ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìƒì  ì£¼ì¸ì´ ì±…ì„ ê²€ìƒ‰í•˜ê³  ìƒì„¸ ì •ë³´ë¥¼ ë³´ê³  í¸ì§‘í•˜ë©°, ê° ì±…ì˜ íŒë§¤ ìˆ˜ëŸ‰ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ë¨¼ì € í˜ì´ì§€ ì‘ì—…ì„ ìœ„í•œ êµ¬ì¡°ë¥¼ ê°„ë‹¨í•˜ê²Œ ì§œë³´ì•˜ìŠµë‹ˆë‹¤.
* #### User
1. ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… êµ¬í˜„
2. user ì•„ì´ì½˜ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë°œê¸‰ ì¿ í‚¤ê°€ ìˆì„ ì‹œ ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™ ì—†ì„ ì‹œì— ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™

* #### Admin(ìƒì  ì£¼ì¸)
1. admin ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œ adminí˜ì´ì§€ë¡œ ì´ë™
2. í˜ì´ì§€ ë‚´ì—ì„œ ë„ì„œì˜ crudë¥¼ êµ¬í˜„
3. admin í˜ì´ì§€ ê°€ë“œ ìƒì„± (ì¼ë°˜ìœ ì €ì™€ ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ì ‘ì† ì œí•œ)

* Model

  ì›¹ í˜ì´ì§€ë‚´ì—ì„œ ìƒì„¸ì •ë³´ ìˆ˜ì •ì´ êµ¬í˜„ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë™ì  í˜ì´ì§€ë¡œ ì‘ì—…í–ˆìŠµë‹ˆë‹¤. nextJsë¥¼ ì´ìš©í•˜ì—¬ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•˜ì˜€ê³ ,
supabaseë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³  ë¡œê·¸ì¸ ì‹œ í† í° ê´€ë¦¬ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
# êµ¬í˜„í•œ ê¸°ëŠ¥
## ì±… ëª©ë¡ í˜ì´ì§€ êµ¬í˜„
### Read
`app/admin/page.tsx`
```
const [page, setPage] = useState(1);
const itemsPerPage = 10;

useEffect(() => {
    async function fetchProducts() {
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage - 1;
      const { data, error } = await supabase.from('books').select('*').range(start, end);
      if (error) console.error(error);
      else setBookData(data);
    }
    fetchProducts();
  }, [page]);
```
í•´ë‹¹ ì½”ë“œëŠ” ìƒí’ˆì„ supabaseì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ì½”ë“œì…ë‹ˆë‹¤. pageê°’ì— ë”°ë¼ ê°€ì ¸ì˜¬ ë°ì´í„°ì˜ ì‹œì‘ê³¼ ë ì¸ë±ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. (ì˜ˆì‹œë¡œ pageê°’ì´ 1ì¸ ê²½ìš° 0\~9ë²ˆê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.) <br/>
ë¹„ë™ê¸°ë¡œ supabaseì—ì„œ books í…Œì´ë¸”ì— ëª¨ë“  ì»¬ëŸ¼ì„ ì¡°íšŒí•˜ê³  startê°’ì—ì„œ end ê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ pageì˜ ìƒíƒœê°€ ë³€ê²½ ë  ë•Œë§ˆë‹¤ fetchProduct í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
ì´ë¥¼ í†µí•´ 1í˜ì´ì§€ë¼ë©´ 0\~9ë²ˆ ë°ì´í„°ë¥¼ 2í˜ì´ì§€ë¡œ ë„˜ì–´ê°ˆ ì‹œ í•¨ìˆ˜ê°€ ì¬ì‹¤í–‰ë˜ë©° ë‹¤ì‹œ ì½ê³  10~19ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ìƒì„¸ ì •ë³´ í˜ì´ì§€
`app/admin/books/[id]`
```
export default function BookDetail() {
  const [book, setBook] = useState<BookDataType | null>(null);
  const [loading, setLoading] = useState(true);
  const [isEditing, setIsEditing] = useState(false);
  const router = useRouter();
  const { id } = useParams(); 

  useEffect(() => {
    async function fetchBook() {
      const { data, error } = await supabase
        .from('books')
        .select('*')
        .eq('id', id)
        .single();

      if (error) {
        console.error(error);
        setLoading(false);
      } else {
        setBook(data);
        setLoading(false);
      }
    }
    if (id) fetchBook();
  }, [id]);

  if (loading) return <p className="text-center">ë¡œë”© ì¤‘...</p>;
  if (!book) return <p className="text-center">í•´ë‹¹ ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>;

  const handleUpdateBook = (updatedName: string, updatedAuthor: string, updatedStock: number, updatedSales: number, updatedDescription?: string) => {
    setBook((prevBook) => prevBook ? { ...prevBook, name: updatedName, author: updatedAuthor, stock: updatedStock, sales: updatedSales, description: updatedDescription } : null);
    setIsEditing(false);
  };
```
idê°’ì„ í‚¤ê°’ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ë™ì  ë¼ìš°íŒ…ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
books tableì—ì„œ idì— ë§ëŠ” ë°ì´í„°ë¥¼ ì„ íƒí•˜ì—¬ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ë§Œì•½ errorì‹œì— ì—ëŸ¬ë¥¼ ì¶œë ¥í•˜ê³  ì„±ê³µ ì‹œì— ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤ ë‘ê°œ ë‹¤ ë§ˆì°¬ê°€ì§€ë¡œ ë¡œë”©ì„ ìƒíƒœê°’ì„ ë³€ê²½í•˜ì—¬ ë¡œë”©ì¤‘ì¸ì§€ë¥¼ í‘œì‹œí•˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.
ì´ í˜ì´ì§€ ë‚´ì—ì„œ ì±… ì •ë³´ ìˆ˜ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ ì´ì „ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ë³´ì—¬ì£¼ê³  ìˆ˜ì • ì—…ë°ì´íŠ¸ ì‚¬í•­ë§Œ ë°›ì•„ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

### Edit
`app/component/editBookdata.tsx`
```
export default function EditBookData({ bookId, name, author, stock, sales, description, onUpdate, showDescription = false }: EditBookDataProps) {
  const [newName, setNewName] = useState(name);
  const [newAuthor, setNewAuthor] = useState(author);
  const [newStock, setNewStock] = useState(stock);
  const [newSales, setNewSales] = useState(sales);
  const [newDescription, setNewDescription] = useState(description || "");

  const handleUpdate = async () => {
    const updateData: Partial<EditBookDataProps> = {
      name: newName,
      author: newAuthor,
      stock: newStock,
      sales: newSales,
    };
    if (showDescription) {
      updateData.description = newDescription; // âœ… ìƒì„¸ í˜ì´ì§€ì—ì„œë§Œ ì„¤ëª… ìˆ˜ì • ê°€ëŠ¥
    }
    const { error } = await supabase
      .from('books')
      .update(updateData)
      .eq('id', bookId);

    if (error) {
      console.error(error);
      alert('ìƒí’ˆ ì •ë³´ ìˆ˜ì • ì‹¤íŒ¨!');
    } else {
      alert('ìƒí’ˆ ì •ë³´ ìˆ˜ì • ì™„ë£Œ!');
      onUpdate(newName, newAuthor, newStock, newSales, newDescription); // âœ… ìˆ˜ì • í›„ ë¶€ëª¨(Home) ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸
    }
  };
```
propsë¡œ ì±…ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë°›ê³  ì¶”ê°€ë¡œ ìˆ˜ì • ìƒíƒœë¥¼ ì•Œë ¤ì£¼ëŠ” ë³€ìˆ˜ì™€ ì„¤ëª… ìˆ˜ì •ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ë°›ìŠµë‹ˆë‹¤(ìƒì„¸ í˜ì´ì§€ ë‚´ì—ì„œë§Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤. admin ë©”ì¸ í˜ì´ì§€ì—ì„œëŠ” ê°„ë‹¨í•œ ìˆ˜ì •ì„ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ descirbtionì„ ë³´ì—¬ì£¼ì§€ ì•Šê³  ìˆ˜ì • ë˜í•œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.) <br />
newë³€ìˆ˜ì´ë¦„(newName ë“±ë“±)ì— ìˆ˜ì •ê°’ì„ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ í›„ supabeseì— ì €ì¥ëœ ê°’ì„ ì°¸ê³ í•˜ì—¬ ìˆ˜ì •í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. errorì‹œì—ëŠ” "ìƒí’ˆ ì •ë³´ ìˆ˜ì • ì‹¤íŒ¨!" ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.


`app/admin/page.tsx`
```
const handleEditClick = (bookId: number) => {
    setEditingbookId((prevId) => (prevId === bookId ? null : bookId));
  };

 <div className={classes.editContainer}>
            <Button color="bg-blue-500" func={() => handleEditClick(book.id)}>
                    {editingbookId === book.id ? "ë‹«ê¸°" : "ìˆ˜ì •í•˜ê¸°"}
                  </Button>
              <Button color="bg-red-500" func={() => handleDelete(book.id)}>ì‚­ì œí•˜ê¸°</Button>
            </div>
            {/* ìˆ˜ì •ë²„íŠ¼ í´ë¦­ ì‹œ ìˆ˜ì •ì°½ ë‚˜ì˜¤ê²Œ í•˜ê¸°*/}
            {editingbookId === book.id && (
              <div
              className="p-4 border border-gray-300 rounded-md"
              onClick={(event) => event.stopPropagation()} // âœ… ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
            >
              <EditBookData
                bookId={book.id}
                name={book.name}
                author={book.author}
                stock={book.stock}
                sales={book.sales}
                onUpdate={(updatedName, updatedAuthor, updatedStock, updatedSales) =>
                  handleUpdateBook(book.id, updatedName, updatedAuthor, updatedStock, updatedSales)
                }
                showDescription={false}
              />
               </div>
            )}
```
buttonì´ ì¤‘ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— Button ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë²„íŠ¼ì„ ì¬ì‚¬ìš©í•˜ì˜€ê³  handleEditClick í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ì •ì¤‘ì¼ë•ŒëŠ” ë‹«ê¸°ë¡œ ë²„íŠ¼ ì´ë¦„ì„ ë°”ê¿”ì£¼ì—ˆìŠµë‹ˆë‹¤.
ì„ íƒí•œ ë°ì´í„°ì˜ ê°’ì„ ì´ì „ì— ë³´ì—¬ë“œë ¸ë˜ editBookData ì»´í¬ë„ŒíŠ¸ë¡œ propsë¡œ ì „ë‹¬í•˜ë©° editBookData ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ ê²½ìš° descriptionì„ ë³´ì—¬ì£¼ì§€ ì•Šê¸° ë•Œë¬¸ì— showDescription={false}ë¥¼ ì „ë‹¬í•˜ì—¬
mainí˜ì´ì§€ì—ì„œëŠ” descriptionê°’ì€ ë³€ê²½ì´ ë¶ˆê°€í•˜ê²Œ ì‘ì—…í•˜ì˜€ìŠµë‹ˆë‹¤.

## ì±… ì¶”ê°€/ì œê±°
### Create
`app/admin/create/page.tsx`
```
const handleAddBook = async () => {
    if (!name || !author || !image || description.trim() === '') {
      return alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }
  
    const filePath = `books/${Date.now()}-${image.name}`;
    const { error: imageError } = await supabase.storage.from('booksImages').upload(filePath, image);
  
    if (imageError) return alert('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: ' + imageError.message);
  
    const { data } = supabase.storage.from('booksImages').getPublicUrl(filePath);
    if (!data) return alert('ì´ë¯¸ì§€ URL ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨');
  
    const imageUrl = data.publicUrl;
  
    const { error } = await supabase.from('books').insert([
      {
        name,
        author,
        stock,
        sales,
        description,
        image_url: imageUrl,
      },
    ]);
  
    if (error) {
      console.error(error);
      return alert('ìƒí’ˆ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
    }
  
    alert('ìƒí’ˆ ì¶”ê°€ ì™„ë£Œ!');
    router.push('/admin');
  };
return(
...
<input type="text" placeholder="ì´ë¦„" value={name} onChange={(e) => setName(e.target.value)} className="w-full p-2 border rounded mb-2 text-black" />
      <input type="text" placeholder="ì €ì" value={author} onChange={(e) => setAuthor(e.target.value)} className="w-full p-2 border rounded mb-2 text-black" />
      <input type="number" placeholder="ì¬ê³ " value={stock} onChange={(e) => setStock(Number(e.target.value))} className="w-full p-2 border rounded mb-2 text-black" />
      <input type="number" placeholder="íŒë§¤ëŸ‰" value={sales} onChange={(e) => setSales(Number(e.target.value))} className="w-full p-2 border rounded mb-2 text-black" />
      <textarea placeholder="ì±… ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" value={description} onChange={(e) => setDescription(e.target.value)} className="w-full p-2 border rounded mb-2 text-black" rows={3}/>
      <label className="block mb-2 font-semibold">ğŸ“· ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>
      <input type="file" accept="image/*" onChange={handleImageChange} className="w-full p-2 border rounded mb-4" />
...
)
```
ë¨¼ì € ifë¬¸ì„ í†µí•´ ëª¨ë“  ë³€ìˆ˜ê°€ ì…ë ¥ ë˜ì—ˆëŠ” ì§€ ì²´í¬í•˜ê³  ì…ë ¥í•˜ì§€ ì•Šì€ ë³€ìˆ˜ê°€ ìˆì„ ì‹œ í•¨ìˆ˜ì—ì„œ íƒˆì¶œí•˜ê³  "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
ê·¸ í›„ supabaseì˜ books í…Œì´ë¸”ì— "í˜„ì¬ ì‹œê°„ ë°€ë¦¬ì´ˆ(ê³ ìœ ì„±) + ì±… ì œëª©"ì„ ì´ë¦„ìœ¼ë¡œ í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ booksImage ë²„í‚·ì— ì €ì¥í•©ë‹ˆë‹¤. <br/>
ì—…ë¡œë“œ ì‹¤íŒ¨ì‹œì— í•¨ìˆ˜ë¥¼ íƒˆì¶œí•˜ë©° "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨"ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  bookImage ë²„í‚·ì—ì„œ ë§Œë“  ì´ë¯¸ì§€ urlì„ í†µí•´ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì‹¤íŒ¨ ì‹œ "ì´ë¯¸ì§€ URL ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨"ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. <br />
ê·¸ í›„ input íƒœê·¸ì— ì…ë ¥í•œ ê°’ì„ ë°›ì•„ supabaseì— books í…Œì´ë¸”ì— ì €ì¥í•©ë‹ˆë‹¤. ì´ë•Œ ë§Œë“  imageurlì£¼ì†Œë¥¼ ì €ì¥í•˜ì—¬ ë‚˜ì¤‘ì— ë²„í‚·ì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. <br />
ì—ëŸ¬ ì‹œì—ëŠ” "ìƒí’ˆ ì¶”ê°€ ì‹¤íŒ¨: + error message"ë¥¼ ì¶œë ¥í•˜ê³  ì„±ê³µ ì‹œ "ìƒí’ˆ ì¶”ê°€ ì™„ë£Œ!"ë¥¼ ì¶œë ¥ í›„ admin í˜ì´ì§€ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.

### Delete
`app/admin/page.tsx`
```
 const handleDelete = async (bookId: number) => {
    const { error } = await supabase.from('books').delete().eq('id', bookId);
    if (error) {
      console.error(error);
      alert('ì‚­ì œ ì‹¤íŒ¨!');
    } else {
      alert('ìƒí’ˆ ì‚­ì œ ì™„ë£Œ!');
      setBookData((prevData) => prevData.filter((book) => book.id !== bookId)); 
    }
  };
```
ì œê±°í•¨ìˆ˜ ì½”ë“œì…ë‹ˆë‹¤. bookIdë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  books í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì œê±°í•©ë‹ˆë‹¤. ì—ëŸ¬ ì‹œ "ì‚­ì œ ì‹¤íŒ¨" ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•˜ê³  ì„±ê³µ ì‹œ "ìƒí’ˆ ì‚­ì œ ì™„ë£Œ!" ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤ <br/>
ì„±ê³µ ì‹œ filterë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ì„ íƒí•œ ë°ì´í„°ì™€ ë‹¤ë¥¸ idê°’ì„ ê°€ì§„ ë°ì´í„°ë§Œ ìƒˆë¡­ê²Œ ë°°ì—´ë¡œ ë§Œë“¤ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (uiì— ì‚­ì œëœ ì±… ë°˜ì˜)

## Admin Guard
`supabaseì˜ sql editorì— ì…ë ¥í•œ sqlë¬¸`
```
UPDATE users SET "isAdmin" = true WHERE email = 'ì§€ì •í•  ê³„ì • ì´ë©”ì¼';
```
`app/component/adminGuard`
```
export default function AdminGuard({ children }: { children: React.ReactNode }) {
  const [isAdmin, setIsAdmin] = useState(false);
  const router = useRouter();

  useEffect(() => {
    async function checkAdmin() {
      const { data: userData, error } = await supabase.auth.getUser();
      if (error || !userData?.user) {
        router.push('/login'); // âœ… ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
        return;
      }

      // ê´€ë¦¬ì ì—¬ë¶€ í™•ì¸
      const { data, error: adminError } = await supabase
        .from('users')
        .select('isAdmin')
        .eq('id', userData.user.id)
        .single();

      if (adminError || !data?.isAdmin) {
        alert('ê´€ë¦¬ì ê³„ì •ì´ ì•„ë‹™ë‹ˆë‹¤.');
        router.push('/'); // // âœ… ì¼ë°˜ ì‚¬ìš©ìëŠ” í™ˆìœ¼ë¡œ ì´ë™
        return;
      }

      setIsAdmin(true);
    }

    checkAdmin();
  }, []);

  if (!isAdmin) {
    return <p>ê´€ë¦¬ì ì¸ì¦ ì¤‘...</p>;
  }

  return <>{children}</>;
}
```
ë¨¼ì € íšŒì›ê°€ì… ëœ ê³„ì • ì¤‘ ê´€ë¦¬ì ê³„ì •ì„ supabase ì‚¬ì´íŠ¸ì—ì„œ sqlë¬¸ì„ ì…ë ¥í•˜ì—¬ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
checkAdmin í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸°ë¡œ ë§Œë“¤ì–´ supabeseì—ì„œ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ë¹„ë¡œê·¸ì¸ ì‹œì—ëŠ” ë¡œê·¸ì¸ ì°½ìœ¼ë¡œ ë¼ìš°íŒ…í•˜ê³  ìœ ì € ê³„ì •ì˜ ê²½ìš° "ê´€ë¦¬ì ê³„ì •ì´ ì•„ë‹™ë‹ˆë‹¤" ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•œ ë’¤ í™ˆìœ¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.<br/>
Admin ê³„ì •ì¼ ì‹œ isAdmin ìƒíƒœë¥¼ trueë¡œ ë³€ê²½í•˜ì—¬ AdminGuard ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¼ ë‚´ìš©ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ui ê¹œë¹¡ì„ ë°©ì§€ë¥¼ ìœ„í•´ ë¹„ë™ê¸° ì‘ì—…ë™ì•ˆ isAdminì´ falseì¸ ê²½ìš° "ê´€ë¦¬ì ì¸ì¦ì¤‘.." í™”ë©´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

## Search
`app/admin/page.tsx`
```
export default function Home() {
...
const handleSearch = async (query: string, type: string) => {
    setSearchQuery(query);
    setSearchType(type);
  };
...
return(...
<SearchBar onSearch={handleSearch} />
...)
}
```

`app/component/searchBar.tsx`
```
export default function SearchBar({ onSearch }: { onSearch: (query: string, type: string) => void }) {
    const [searchType, setSearchType] = useState("í†µí•©ê²€ìƒ‰");
    const [searchQuery, setSearchQuery] = useState("");
    const [dropdownOpen, setDropdownOpen] = useState(false);


    const searchOptions = ["í†µí•©ê²€ìƒ‰", "ì œëª©", "ì €ì"];
    

     const handleSearch = () => {
        if (searchQuery.trim() === "") {
            onSearch("",''); // âœ… ê²€ìƒ‰ì–´ê°€ ë¹„ì–´ìˆìœ¼ë©´ ì „ì²´ ì¡°íšŒ ì‹¤í–‰
        } else {
            onSearch(searchQuery, searchType);
        }
    };
    useEffect(() => {
        if (searchQuery.trim() === "") {
            onSearch("", '');
        }
    }, [searchQuery]);
return (
        <div className={classes.searchBar}>
            {/* ê²€ìƒ‰ ìœ í˜• ë“œë¡­ë‹¤ìš´ */}
            <div className={classes.dropdown}>
                <button className={classes.dropdownBtn} type="button" onClick={() => setDropdownOpen(!dropdownOpen)}>
                    {searchType} <span className="arrow">â–¼</span>
                </button>
                {dropdownOpen && (
                    <ul className={classes.dropdownMenu}>
                        {searchOptions.map((option, index) => (
                            <li key={index} className={classes.dropdownItem}
                                onClick={() => {
                                    setSearchType(option);
                                    setDropdownOpen(false);
                                }}>
                                {option}
                            </li>
                        ))}
                    </ul>
                )}
            </div>

            {/* êµ¬ë¶„ì„  */}
            <span className={classes.divider}>|</span>

            {/* ê²€ìƒ‰ ì…ë ¥ í•„ë“œ */}
            <input
                type="text"
                className={classes.searchInput}
                placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
            />

            {/* ê²€ìƒ‰ ì•„ì´ì½˜ ë²„íŠ¼ */}
            <button className={classes.searchBtn} onClick={handleSearch}>
                <i className="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>
    );
}
```
searchType ìƒíƒœ ì´ˆê¸°ê°’ì„ 'í†µí•©ê²€ìƒ‰'ìœ¼ë¡œ ì§€ì •í•˜ì—¬ í•„í„° ì´ˆê¸°ê°’ì„ í†µí•©ê²€ìƒ‰ìœ¼ë¡œ ì§€ì •í•˜ì˜€ê³  í´ë¦­ ì‹œ dropdownOpen ìƒíƒœê°€ falseì—ì„œ trueë¡œ ë³€ê²½ë˜ë©´ì„œ searchOptionsì— ìˆëŠ” ê²€ìƒ‰ í•„í„°ë¥¼ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë³´ì—¬ì£¼ë©°
ì˜µì…˜ ì„ íƒì‹œì— searchTypeì„ falseë¡œ ë°”ê¿” ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë¥¼ ë‹«ì•„ì¤ë‹ˆë‹¤. <br/>
input ì°½ì— ì…ë ¥í•œ í…ìŠ¤íŠ¸ë¥¼ searchQueryì— ì €ì¥í•˜ê³  ì‚¬ìš©ìê°€ ì—”í„°í‚¤ë¥¼ ëˆ„ë¥´ë©´ handleSearch í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. handleSearch í•¨ìˆ˜ì—ì„œ ë§Œì•½ ê²€ìƒ‰ì–´ê°€ ë¹„ì–´ìˆìœ¼ë©´ ì „ì²´ ì¡°íšŒë¥¼ ì‹¤ì‹œí•˜ì˜€ê³ <br/>
ì•„ë‹ ì‹œì—ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ handleSerchë¥¼ í˜¸ì¶œí•˜ì—¬ searchQuery(ê²€ìƒ‰ì–´) searchType(ex : í†µí•©ê²€ìƒ‰)ì„ ì „ë‹¬í•©ë‹ˆë‹¤.<br/>
ê·¸ í›„ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°›ì€ ê²€ìƒ‰ì–´ì™€ ê²€ìƒ‰ ìœ í˜•ì„ supabaseì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.

